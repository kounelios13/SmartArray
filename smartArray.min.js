function SmartArray(){function r(){var a=arguments,e=c,f=b=a[0],g=e.length,h=1<arguments.length;h&&(b=a[1],"number"!=typeof b&&(b=e.indexOf(b)));"number"!=typeof f&&(f=e.indexOf(f));return h?-1!=f&&-1!=b&&f!=b&&0<=f&&f<g&&0<=b&&b<g:-1!=f&&0<=f&&f<g}function w(a,c){return"number"===typeof(a&&c)?a-c:(a+"").localeCompare(c)}function v(a){var c,f,g;for(g=a.length;g;)c=Math.floor(Math.random()*g),f=a[g-1],a[g-1]=a[c],a[c]=f,g--;return a}function h(){q&&(m=c.slice())}function l(a){return Array.prototype.slice.call(a)}
function n(d){a.length=c.length}function t(){for(var d=0,e=c.length;d<e;d++)delete a[d];p=0}function k(d){var e=a.length;for(d=d?p:0;d<e;d++)a[d]=c[d];p=e}var q=!0,a=this,u=!1,c=[],m=[];c.constructor!=Array&&(c=[]);var p=0;a.constructor="SmartArray";a.length=0;k();a.isEmpty=function(){return 0==a.length};a.includes=function(){return Array.prototype.includes.apply(c,l(arguments))};a.every=function(){return Array.prototype.every.apply(c,l(arguments))};a.toChars=function(){for(var a=[],e=0,f=c.length;e<
f;e++)"number"===typeof c[e]&&a.push(String.fromCharCode(parseInt(c[e])));return a};a.getUniqueItems=function(){for(var c=[],e=a.getArray(!0).sort(w),f=0,g=e.length;f<g;f++)-1==c.indexOf(e[f])&&c.push(e[f]);return c};a.frequency=function(a){for(var e=0,f=c,g=0,h=f.length;g<h;g++)a==f[g]&&e++;return e};a.topItem=function(){var d=c.slice();d.sort();for(var e=a.frequency(d[0]),f=d[0],g=0,h=d.length;g<h;g++)a.frequency(d[g])>e&&(e=a.frequency(d[g]),f=d[g]);return f};a.getArray=function(){return c.slice()};
a.getLastItem=function(){var d=c;return a.isEmpty()?null:d[d.length-1]};a.replaceArray=function(a){h();c=a.slice();n(c);k();return c};a.backupArray=function(){h()};a.restoreBackup=function(){if(q)return n(c),a.replaceArray(m.slice()),k(),c};a["delete"]=function(d){if(!r(d))throw Error("Invalid index");delete a[d];a.length--;return delete c[d]};a.getBackup=function(){return m};a.deleteArray=function(){h();t();c.length=a.length=0};a.shuffle=function(){if(a.isEmpty())throw Error("Array is empty.");h();
v(c);m!=c&&k()};a.pickRandomItem=function(){return v(c.slice())[0]};a.swap=function(d,e){if(!r(d,e))throw new TypeError("Invalid index values");h();var f=a[e];a[e]=a[d];a[d]=f;f=c[e];c[e]=c[d];c[d]=f};a.replaceItem=function(d,e,f){if(!f&&!r(d))throw new TypeError("Invalid Index");h();c[d]=e;a[d]=e;f&&n(c);return c};a.set=function(c,e){return a.replaceItem(c,e,!0)};a.disableBackups=function(){q=!1;m=null};a.enableBackups=function(){q=!0;m=[]};a.lastItem=function(){return c[a.length-1]};a.removeDuplicates=
function(){h();t();a.replaceArray(a.getUniqueItems(!0));n(c);p=c.length;k();return c};a.denyDuplicates=function(){u=!0;return a.removeDuplicates()};a.allowDuplicates=function(){u=!1};a.push=function(){h();a.length=Array.prototype.push.apply(c,l(arguments));if(u)return a.removeDuplicates(),a.length;k(!0);return a.length};a.pop=function(){if(a.isEmpty())throw Error("Can't pop from empty array.");h();p--;delete a[--a.length];return c.pop()};a.fill=function(){Array.prototype.fill.apply(c,l(arguments));
k();return c};a.filter=function(){return Array.prototype.filter.apply(c,l(arguments))};a.find=function(a){return Array.prototype.find.apply(c,l(arguments))};a.values=function(){return c.values()};a.slice=function(a,e){return Array.prototype.slice.apply(c,l(arguments))};a.shift=function(){if(a.isEmpty())throw Error("Can't shift from empty array.");h();var d=c.shift();n(c);k();delete a[a.length];return d};a.unshift=function(d){c.unshift(d);n(c);k();return a.length};a.reverse=function(){h();c.reverse();
k();return c};a.reduce=function(){return Array.prototype.reduce.apply(c,l(arguments))};a.sort=function(a){h();c.sort(a);t();k();return c};a.join=function(a){return c.join(a)};a.toString=function(){return c.toString()};a.indexOf=function(a){return c.indexOf(a)};a.lastIndexOf=function(){return Array.prototype.lastIndexOf.apply(c,l(arguments))};a.keys=function(){return c.keys()};a.map=function(a){if(!a)throw new TypeError("You can't call .map() without passing a function.");h();c.map(a);k();return c.map(a)};
a.forEach=function(a,e){return c.forEach(a,e)};a.every=function(){return Array.prototype.every.apply(c,l(arguments))}};